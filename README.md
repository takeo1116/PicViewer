# PicViewer

ローカルにある画像を管理するアプリケーション

## 概要

PicViewerは、ローカルに保存された画像ファイルにタグを付けて管理・検索できるデスクトップアプリケーションです。データベースを使用せず、ファイルシステムのみで動作するため、軽量で簡単に使用できます。

## 特徴

- 🖼️ **画像一覧表示** - JPG、PNG、GIF、BMP、WebP形式の画像を自動検出
- 🏷️ **タグ管理** - 画像に複数のタグを付与・編集
- 🔗 **URL管理** - 画像の入手元URLを記録・管理
- 🔍 **検索・フィルタリング** - ファイル名やタグでの検索
- 🔄 **手動更新** - ボタンクリックで最新の画像を反映
- 💾 **データベース不要** - ファイルシステムのみで動作
- 📱 **レスポンシブ対応** - 様々な画面サイズに対応

## 環境構築

### 前提条件

- Node.js (v18以上)
- Rust (最新版)
- Tauri CLI

### 1. Node.js環境の構築

```bash
# Node.jsの依存関係をインストール
npm install
```

### 2. Rust環境の構築

```bash
# Rustをインストール（初回のみ）
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env

# Tauri CLIをインストール
cargo install tauri-cli
```

### 3. アプリケーションの起動

#### Webブラウザでのテスト（推奨）

```bash
# 開発モードで起動
npm run dev
# または
npm run build && npm run preview
```

ブラウザで http://localhost:1420 または http://localhost:4173 にアクセス

#### Tauriデスクトップアプリとして起動

**注意**: Tauriアプリの起動には追加のシステムライブラリが必要です：

```bash
# Ubuntu/Debian での必要ライブラリのインストール
sudo apt update
sudo apt install -y libwebkit2gtk-4.1-dev libappindicator3-dev librsvg2-dev patchelf libgtk-3-dev libsoup-2.4-dev

# Tauriアプリとして起動
npm run tauri dev
```

## 使い方

### 1. 画像の準備

1. **`public/pics`** フォルダに画像ファイルを配置します
2. 対応形式: JPG、JPEG、PNG、GIF、BMP、WebP
3. **リアルタイム更新**: 新しい画像を追加すると自動的に画面に反映されます
4. アプリを起動すると、自動的に `public/pics` フォルダ内の画像が読み込まれます

**🔄 手動更新機能:**
- **「🔄 更新」ボタン**: クリックで最新の画像ファイルを検索・読み込み
- **簡単操作**: 新しい画像を追加した後、ボタン一つで即座に反映
- **軽量設計**: 自動ポーリングなしでリソース消費を最小限に

**📁 ディレクトリ構造:**
```
public/
└── pics/           ← ここに画像を配置
    ├── win_10.jpg
    ├── win_11.jpg
    ├── win_7.jpg
    ├── win_vista.jpg
    └── win_xp.jpg
```

### 2. メタデータの編集（タグ・入手元URL）

1. 画像カードの下部にある「📝 編集」ボタンをクリックします
2. **タグの編集**:
   - テキストフィールドに新しいタグを入力し、「追加」ボタンをクリック
   - 既存のタグを削除する場合は、タグの横の「×」ボタンをクリック
3. **入手元URLの編集**:
   - 「入手元URL」フィールドに画像の参照元URLを入力
   - 入力すると自動でプレビューが表示され、クリックで元サイトにアクセス可能
4. 編集完了後、「保存」ボタンをクリックします

### 3. 検索・フィルタリング

#### ファイル名での検索
- 上部の検索バーに画像ファイル名を入力します
- 部分一致で絞り込まれます

#### タグでの絞り込み
- 「タグで絞り込み」セクションで、使用したいタグをクリックします
- 複数のタグを選択することで、AND検索が可能です

#### 検索のクリア
- 「クリア」ボタンをクリックすると、すべての検索条件がリセットされます

### 4. データの保存場所

- **メタデータ**: タグ情報と入手元URLはブラウザのローカルストレージに保存
- **保存キー**: `picviewer-metadata`
- **データベース不要**: サーバーやファイル書き込み権限は必要なし
- **注意**: ブラウザデータをクリアするとメタデータも削除されます

## 開発コマンド

```bash
# 開発サーバーを起動
npm run dev

# TypeScriptをビルド
npm run build

# 本番ビルドをプレビュー
npm run preview

# Tauriアプリとして起動
npm run tauri dev

# Tauriアプリをビルド
npm run tauri build
```

## 技術スタック

### フロントエンド
- React 18
- TypeScript
- Vite + カスタムプラグイン
- Tailwind CSS

### 画像検出・メタデータ管理システム
- **Viteプラグイン**: `public/pics`ディレクトリの画像ファイル検出
- **仮想モジュール**: 開発時の動的ファイルリスト
- **静的JSON**: 本番環境用ファイルリスト
- **メタデータストア**: タグ・URL情報の統合管理
- **ローカルストレージ**: 画像メタデータの永続化
- **手動更新**: ユーザーの明示的な操作による更新

### バックエンド
- Tauri (Rust) *(オプション)*
- ファイルシステムベース

### 開発ツール
- Node.js
- Rust *(Tauri使用時)*
- Cargo *(Tauri使用時)*

## プロジェクト構造

```
PicViewer/
├── src/                    # React フロントエンド
│   ├── components/        # UIコンポーネント
│   ├── hooks/            # カスタムReactフック
│   ├── services/         # APIサービス
│   └── types/           # TypeScript型定義
├── src-tauri/           # Tauri バックエンド（Rust）
│   ├── src/            # Rustソースコード
│   └── Cargo.toml     # Rust依存関係
├── public/             # 静的ファイル
└── package.json       # Node.js依存関係
```

## ライセンス

このプロジェクトは個人利用・学習目的で作成されました。

## 今後の拡張予定

- 画像のメタデータ表示
- 画像の編集機能
- タグの自動提案
- 画像のエクスポート機能
- 複数フォルダの同時管理
